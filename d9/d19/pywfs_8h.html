<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>MAOS: lib/pywfs.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../maos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MAOS
   </div>
   <div id="projectbrief">Multithreaded Adaptive Optics Simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/d19/pywfs_8h.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pywfs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:d0/d1d/structpywfs__cfg__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#d0/d1d/structpywfs__cfg__t">pywfs_cfg_t</a></td></tr>
<tr class="separator:d0/d1d/structpywfs__cfg__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d2/d8c/structpywfs__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a></td></tr>
<tr class="separator:d2/d8c/structpywfs__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac7b4803a7b02c777b35d14862ebfe681"><td class="memItemLeft" align="right" valign="top"><a id="ac7b4803a7b02c777b35d14862ebfe681"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>pywfs_ng</b>(pycfg)&#160;&#160;&#160;((pycfg &amp;&amp; (pycfg-&gt;raw||pycfg-&gt;nside&lt;3))?pycfg-&gt;nside:2)</td></tr>
<tr class="separator:ac7b4803a7b02c777b35d14862ebfe681"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4c483182664896252c8e9760cef5cd99"><td class="memItemLeft" align="right" valign="top"><a id="a4c483182664896252c8e9760cef5cd99"></a>
<a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>pywfs_new</b> (<a class="el" href="../../d9/d19/pywfs_8h.html#d0/d1d/structpywfs__cfg__t">pywfs_cfg_t</a> *pycfg, <a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> *loc, const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *amp)</td></tr>
<tr class="separator:a4c483182664896252c8e9760cef5cd99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9030c894228f7971f87beda176273c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#ab9030c894228f7971f87beda176273c5">pywfs_free</a> (<a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *pywfs)</td></tr>
<tr class="separator:ab9030c894228f7971f87beda176273c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac01185e7becab21fa86574a490ba6e94"><td class="memItemLeft" align="right" valign="top"><a id="ac01185e7becab21fa86574a490ba6e94"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>pycfg_free</b> (<a class="el" href="../../d9/d19/pywfs_8h.html#d0/d1d/structpywfs__cfg__t">pywfs_cfg_t</a> *pycfg)</td></tr>
<tr class="separator:ac01185e7becab21fa86574a490ba6e94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd0d635d05937b89807720bcd4fac99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#a4cd0d635d05937b89807720bcd4fac99">pywfs_grad</a> (<a class="el" href="../../d3/d27/structdmat.html">dmat</a> **pgrad, const <a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *pywfs, const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *ints)</td></tr>
<tr class="separator:a4cd0d635d05937b89807720bcd4fac99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14bafa3942ffa1d79033b200729a555d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#a14bafa3942ffa1d79033b200729a555d">pywfs_ints</a> (<a class="el" href="../../d3/d27/structdmat.html">dmat</a> **ints, const <a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *pywfs, const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *opd, real siglev)</td></tr>
<tr class="separator:a14bafa3942ffa1d79033b200729a555d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54d180c17544b1e528115fa8160c75bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#a54d180c17544b1e528115fa8160c75bf">pywfs_mkg</a> (<a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *pywfs, const <a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> *ploc, const char *distortion, const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *mod, const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *opdadd, real displacex, real displacey)</td></tr>
<tr class="separator:a54d180c17544b1e528115fa8160c75bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91432268bc54e68b69b04e3f0ebc0875"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#a91432268bc54e68b69b04e3f0ebc0875">pywfs_tt</a> (const <a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *pywfs)</td></tr>
<tr class="separator:a91432268bc54e68b69b04e3f0ebc0875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56a2705ae38d20c2541c4b3b47be4163"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#a56a2705ae38d20c2541c4b3b47be4163">pywfs_simu</a> (<a class="el" href="../../d3/d27/structdmat.html">dmat</a> **ints, <a class="el" href="../../d3/d27/structdmat.html">dmat</a> **grad, <a class="el" href="../../d9/d19/pywfs_8h.html#d0/d1d/structpywfs__cfg__t">pywfs_cfg_t</a> *pycfg, int order, <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *wvl, real siglev, <a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> *loc, const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *amp, const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *opd)</td></tr>
<tr class="separator:a56a2705ae38d20c2541c4b3b47be4163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51055b663bc8f4233e915bc9c2463299"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#a51055b663bc8f4233e915bc9c2463299">pywfs_gain_calibrate</a> (<a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *pywfs, const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *grad, real r0)</td></tr>
<tr class="separator:a51055b663bc8f4233e915bc9c2463299"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ccc1fa8060ae14a0aeb0c098b7f559d"><td class="memItemLeft" align="right" valign="top"><a id="a8ccc1fa8060ae14a0aeb0c098b7f559d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d19/pywfs_8h.html#a8ccc1fa8060ae14a0aeb0c098b7f559d">pywfs_test</a> (<a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *pywfs)</td></tr>
<tr class="memdesc:a8ccc1fa8060ae14a0aeb0c098b7f559d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test PYWFS implementation. <br /></td></tr>
<tr class="separator:a8ccc1fa8060ae14a0aeb0c098b7f559d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Setup pyramid WFS and do simulation. </p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="d0/d1d/structpywfs__cfg__t" id="d0/d1d/structpywfs__cfg__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d0/d1d/structpywfs__cfg__t">&#9670;&nbsp;</a></span>pywfs_cfg_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct pywfs_cfg_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Pyramid WFS configurations. //Todo: move to <a class="el" href="../../d9/d19/pywfs_8h.html">pywfs.h</a> after <a class="el" href="../../d9/d19/pywfs_8h.html">pywfs.h</a> is moved to lib folder </p>
</div><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for pywfs_cfg_t:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d7/d99/structpywfs__cfg__t__coll__graph.png" border="0" usemap="#pywfs__cfg__t_coll__map" alt="Collaboration graph"/></div>
<map name="pywfs__cfg__t_coll__map" id="pywfs__cfg__t_coll__map">
</map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a4c5562283523e060cbd64b4168075576"></a>int</td>
<td class="fieldname">
order</td>
<td class="fielddoc">
<p>Number of pixels per pupil in each dimension. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a923bea3f0ed3a3c7b46f6f53e5356251"></a>real</td>
<td class="fieldname">
siglev</td>
<td class="fielddoc">
<p>Nominal siglev per subaperture </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a6c3b4c8cff9f6a99c7f85abd526a062b"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
wvl</td>
<td class="fielddoc">
<p>wavelength </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a50907cf384e6b2d26c1cdbd55828ff74"></a>real</td>
<td class="fieldname">
dx</td>
<td class="fielddoc">
<p>OPD sampling. Use loc-&gt;dx if not present </p>
</td></tr>
<tr><td class="fieldtype">
<a id="af885240cbecf74b2a4c267898fb2fef6"></a>real</td>
<td class="fieldname">
D</td>
<td class="fielddoc">
<p>Aperture diameter. Use loc_diam if not present </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a165013585625c81b54bcd6fa15db2f6a"></a>int</td>
<td class="fieldname">
nside</td>
<td class="fielddoc">
<p>Number of sides. can be 4 (default) or 3. 4-side is traditional pyramid while 3-side is much easier to make. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a31180e752c3a1e615e413f61fe3b7aa2"></a>int</td>
<td class="fieldname">
raw</td>
<td class="fielddoc">
<p>1: use normalized ints of each sub-pupil as gradient. 0 (default): use difference between sub-pupils </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a93a55c80120d2267e8b3b71fb9dd828c"></a>real</td>
<td class="fieldname">
dsa</td>
<td class="fielddoc">
<p>Subaperture size (default is D/order) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a4ab597df2959f1b3fe747f9ec1a365b8"></a>real</td>
<td class="fieldname">
saat</td>
<td class="fielddoc">
<p>drop subapertures below this fraction (default is 0) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a09af26960a414c5bd1d9410e82c40885"></a>real</td>
<td class="fieldname">
hs</td>
<td class="fielddoc">
<p>Height of guide star (default is inf) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="acc902b9eadedebe1fd29fc06bfaee458"></a>real</td>
<td class="fieldname">
hc</td>
<td class="fielddoc">
<p>Conjugation height of WFS pupil (default is 0) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="abf6b2eee87e4010d2b5a8a279690faf2"></a>real</td>
<td class="fieldname">
modulate</td>
<td class="fielddoc">
<p>Amount of modulation in radian (default is 5 lambda/D) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="acbd0d2bbccd50cfd8cb716021e376eee"></a>int</td>
<td class="fieldname">
modulpos</td>
<td class="fielddoc">
<p>Number of positions per modulation cycle per ring(default is 32) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ad36b35d4aa3843841f00aea5783f0429"></a>int</td>
<td class="fieldname">
modulring</td>
<td class="fielddoc">
<p>Number of rings within the maximum radius to modulate (default is 1, use more to simulate extended object) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aa7d874c40041ba05525a118ecde1d4c4"></a>int</td>
<td class="fieldname">
sigmatch</td>
<td class="fielddoc">
<p>Scale gradients by matching intensity (1: locally, 2 (default): globally). </p>
</td></tr>
<tr><td class="fieldtype">
<a id="acdb71e37bc278e2caeabf8d6defb0288"></a>real</td>
<td class="fieldname">
poke</td>
<td class="fielddoc">
<p>How much to poke for mkg. (default is 1e-7 m) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a3a3bfc1fc0b2413186cab50f8ceb588f"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
wvlwts</td>
<td class="fielddoc">
<p>Wavelength weights </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a050f2355cdb3e1d2fd2901a300cdc1bf"></a>real</td>
<td class="fieldname">
pixblur</td>
<td class="fielddoc">
<p>pixel blur (default is 0.3) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aedce6273a4e3d109640e52cdb8ebbce6"></a>real</td>
<td class="fieldname">
fieldstop</td>
<td class="fielddoc">
<p>size of field stop in arcsec (default is none). </p>
</td></tr>
<tr><td class="fieldtype">
<a id="afe8fb8802e3775d894ca9c3d6ab36742"></a>int</td>
<td class="fieldname">
modulpos_i</td>
<td class="fielddoc">
<p>For testing: Index of modulate position to use between 0 and modulpos </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a2139cf9d26efd615bdfba028c4b57e02"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
psx</td>
<td class="fielddoc">
<p>pyramid WFS pupil shift along x (in pixel). pupil ordering: -x+y, +x+y, -x-y, +x-y. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a18be9e46e11e25e1ba8a8278417a9826"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
psy</td>
<td class="fielddoc">
<p>pyramid WFS pupil shift along y (in pixel). </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a94f63cb833763a5a4e23a5589c7d08b2"></a>real</td>
<td class="fieldname">
flate</td>
<td class="fielddoc">
<p>pyramid flat edge angular width (in arcsec) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a313f56cea0a064c26afdbbdb8d93194b"></a>real</td>
<td class="fieldname">
flatv</td>
<td class="fielddoc">
<p>pyramid flat vertex angular width (in arcsec) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a1c01800cdad9b5c0c6abc597ec4667c2"></a>real</td>
<td class="fieldname">
pupelong</td>
<td class="fielddoc">
<p>pyramid pupil (detector) elongation ratio (long axis / short axis - 1). </p>
</td></tr>
</table>

</div>
</div>
<a name="d2/d8c/structpywfs__t" id="d2/d8c/structpywfs__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d2/d8c/structpywfs__t">&#9670;&nbsp;</a></span>pywfs_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct pywfs_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Parameters used by Pyramid WFS. </p>
</div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for pywfs_t:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d6/dfe/structpywfs__t__coll__graph.png" border="0" usemap="#pywfs__t_coll__map" alt="Collaboration graph"/></div>
<map name="pywfs__t_coll__map" id="pywfs__t_coll__map">
</map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a19f33579a7f8481bb685e1d658a7d3fa"></a>const <a class="el" href="../../d9/d19/pywfs_8h.html#d0/d1d/structpywfs__cfg__t">pywfs_cfg_t</a> *</td>
<td class="fieldname">
cfg</td>
<td class="fielddoc">
<p>Configuration. do not try to free. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a89978edc12c2761bf8cda0fc5b31281e"></a>int</td>
<td class="fieldname">
iwfs0</td>
<td class="fielddoc">
<p>First iwfs for this powfs </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aea7b10710994fc11ffb7259f75fb21ae"></a>int</td>
<td class="fieldname">
gpu</td>
<td class="fielddoc">
<p>Whether GPU can be used </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a784fc485fd9cf7e0bd12b452a6953d40"></a><a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> *</td>
<td class="fieldname">
loc</td>
<td class="fielddoc">
<p>Pupil plane grid </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a8ea5424e063305fa56a9eb981114269b"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
amp</td>
<td class="fielddoc">
<p>Pupil plane amplitude map </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a956498eb429c982f62964549715a3899"></a><a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> *</td>
<td class="fieldname">
saloc</td>
<td class="fielddoc">
<p>powfs.saloc </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a214559a0d59d0c6d7d7828e1ff55c19f"></a><a class="el" href="../../db/d1f/locfft_8h.html#d3/dcd/structlocfft__t">locfft_t</a> *</td>
<td class="fieldname">
locfft</td>
<td class="fielddoc">
<p>First fft to form PSF </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aee96eeac0e08462d90b62d877b9d0f9c"></a><a class="el" href="../../df/def/type_8h.html#d8/d42/structccell">ccell</a> *</td>
<td class="fieldname">
pyramid</td>
<td class="fielddoc">
<p>OPD of pyramid. Angular size of clear aperture is different </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ae6552070a18084f24ddbede70afac5b2"></a><a class="el" href="../../db/d16/structcmat.html">cmat</a> *</td>
<td class="fieldname">
nominal</td>
<td class="fielddoc">
<p>For sampling results onto detector </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aa4cf8125494b3467d896c790b2204750"></a><a class="el" href="../../df/def/type_8h.html#d6/ddb/structdspcell">dspcell</a> *</td>
<td class="fieldname">
si</td>
<td class="fielddoc">
<p>For sampling results onto detector </p>
</td></tr>
<tr><td class="fieldtype">
<a id="abe0a5a786cb47d6baf2aff7abf3339c2"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
sioff</td>
<td class="fielddoc">
<p>Offset for si </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a0f4db87d2d77f991038a62d055ff82b5"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
saa</td>
<td class="fielddoc">
<p>Subaperture area. Average is one </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a37e430af2e770cc757f9c04fee4f69ef"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
gradoff</td>
<td class="fielddoc">
<p>Gradient of a flat wavefront </p>
</td></tr>
<tr><td class="fieldtype">
<a id="ab511e9b7adbbddd52b563fc7cec80ecf"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
GTT</td>
<td class="fielddoc">
<p>Response of TT mode. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aef48199fd578484ed3d4208c19e1fdaf"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
pupilshift</td>
<td class="fielddoc">
<p>Pupil shift. 4x2. </p>
</td></tr>
<tr><td class="fieldtype">
<a id="aef2b60f9e256be3b8fba4f498a7e13d5"></a><a class="el" href="../../df/def/type_8h.html#dc/da1/structloccell">loccell</a> *</td>
<td class="fieldname">
msaloc</td>
<td class="fielddoc">
<p>Mishaped saloc of each sub-pupil due to optical effects </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a268491858839c93d7e3f79ed514f3b47"></a><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *</td>
<td class="fieldname">
opdadd</td>
<td class="fielddoc">
<p>Aberrations along the WFS path (on locfft grid) </p>
</td></tr>
<tr><td class="fieldtype">
<a id="a93a85e438a350f07999bb8cfd18705eb"></a>real</td>
<td class="fieldname">
gain</td>
<td class="fielddoc">
<p>Optical gain of PYWFS </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab9030c894228f7971f87beda176273c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9030c894228f7971f87beda176273c5">&#9670;&nbsp;</a></span>pywfs_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pywfs_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *&#160;</td>
          <td class="paramname"><em>pywfs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>frees <a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> </p>

</div>
</div>
<a id="a4cd0d635d05937b89807720bcd4fac99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cd0d635d05937b89807720bcd4fac99">&#9670;&nbsp;</a></span>pywfs_grad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pywfs_grad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d27/structdmat.html">dmat</a> **&#160;</td>
          <td class="paramname"><em>pgrad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *&#160;</td>
          <td class="paramname"><em>pywfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>ints</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute gradients. It replaces the result, not accumulate. </p>

</div>
</div>
<a id="a14bafa3942ffa1d79033b200729a555d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14bafa3942ffa1d79033b200729a555d">&#9670;&nbsp;</a></span>pywfs_ints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pywfs_ints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d27/structdmat.html">dmat</a> **&#160;</td>
          <td class="paramname"><em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *&#160;</td>
          <td class="paramname"><em>pywfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>opd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>siglev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform FFT over the complex PSF with additional phases caused by the pyramid. FFT on each quadrant of the PSF creates diffraction effects. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ints</td><td>The intensity. Accumulate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pywfs</td><td>PYWFS parameters </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opd</td><td>The OPD </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">siglev</td><td>The signal level. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a54d180c17544b1e528115fa8160c75bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54d180c17544b1e528115fa8160c75bf">&#9670;&nbsp;</a></span>pywfs_mkg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d27/structdmat.html">dmat</a>* pywfs_mkg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *&#160;</td>
          <td class="paramname"><em>pywfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> *&#160;</td>
          <td class="paramname"><em>locin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>distortion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>opdadd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>displacex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>displacey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>locin is on pupil. </p>

</div>
</div>
<a id="a91432268bc54e68b69b04e3f0ebc0875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91432268bc54e68b69b04e3f0ebc0875">&#9670;&nbsp;</a></span>pywfs_tt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d27/structdmat.html">dmat</a>* pywfs_tt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *&#160;</td>
          <td class="paramname"><em>pywfs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return measurement of T/T mode, normalized for 1 unit of input. </p>

</div>
</div>
<a id="a56a2705ae38d20c2541c4b3b47be4163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56a2705ae38d20c2541c4b3b47be4163">&#9670;&nbsp;</a></span>pywfs_simu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pywfs_simu </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d27/structdmat.html">dmat</a> **&#160;</td>
          <td class="paramname"><em>ints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d27/structdmat.html">dmat</a> **&#160;</td>
          <td class="paramname"><em>grad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d19/pywfs_8h.html#d0/d1d/structpywfs__cfg__t">pywfs_cfg_t</a> *&#160;</td>
          <td class="paramname"><em>pycfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>wvl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>siglev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> *&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>amp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>opd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A convenient wrapper to simulate pywfs from Python. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ints</td><td>Subaperture images </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">grad</td><td>Subaperture gradients </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pycfg</td><td>Configuration struct. Optional if order, wvl, siglev are all set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">order</td><td>PWFS order. optional if pycfg is set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wvl</td><td>Wavelength. optional if pycfg is set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">siglev</td><td>Signal level of each subaperture. optional if pycfg is set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">loc</td><td>OPD loc. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">amp</td><td>OPD amplitude map. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opd</td><td>OPD. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a51055b663bc8f4233e915bc9c2463299"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51055b663bc8f4233e915bc9c2463299">&#9670;&nbsp;</a></span>pywfs_gain_calibrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pywfs_gain_calibrate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d19/pywfs_8h.html#d2/d8c/structpywfs__t">pywfs_t</a> *&#160;</td>
          <td class="paramname"><em>pywfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d27/structdmat.html">dmat</a> *&#160;</td>
          <td class="paramname"><em>grad</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>r0</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PYWFS gain calibrate using measurements. The idea is as follows. With a given input OPD, the PWFS measures OPDR. Feed OPDR to PWFS, it measures OPDR2. Optionally add a fitting error to the input. Scale OPDR by alpha, it measures OPDR3. Iterate the alpha until OPDR3 has the same magnitude as OPDR. The final alpha is the gain adjustment. This does not quite work because the original input OPD and OPDR has different spatial frequency content. Most of OPD is not measurable. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

   </ul>
 </div>
</body>
</html>
