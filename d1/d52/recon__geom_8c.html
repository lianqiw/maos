<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<title>MAOS: maos/recon_geom.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../maos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MAOS
   </div>
   <div id="projectbrief">Multithreaded Adaptive Optics Simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d1/d52/recon__geom_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">recon_geom.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7106d709bbd10a16e96fd7e53736f841" id="r_a7106d709bbd10a16e96fd7e53736f841"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/recon__geom_8c.html#a7106d709bbd10a16e96fd7e53736f841">shwfs_gloc_gamp</a> (<a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> **pgloc, <a class="el" href="../../d3/d27/structdmat.html">dmat</a> **gamp, const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *parms, const <a class="el" href="../../df/def/type_8h.html#d6/da3/structmap__t">map_t</a> *aper, int iwfsr)</td></tr>
<tr class="separator:a7106d709bbd10a16e96fd7e53736f841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a137a442f111596a0429c7400dd902141" id="r_a137a442f111596a0429c7400dd902141"><td class="memItemLeft" align="right" valign="top"><a id="a137a442f111596a0429c7400dd902141" name="a137a442f111596a0429c7400dd902141"></a>
<a class="el" href="../../d7/d63/classlong.html">long</a>&#160;</td><td class="memItemRight" valign="bottom"><b>count_nonzero</b> (const <a class="el" href="../../d7/da0/structlmat.html">lmat</a> *in)</td></tr>
<tr class="separator:a137a442f111596a0429c7400dd902141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c5b4e0a4cbf262b533f64fd8b88b45a" id="r_a1c5b4e0a4cbf262b533f64fd8b88b45a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/recon__geom_8c.html#a1c5b4e0a4cbf262b533f64fd8b88b45a">setup_recon_HXW</a> (<a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *recon, const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *parms, <a class="el" href="../../df/def/type_8h.html#d2/d8c/structmapcell">mapcell</a> *atm)</td></tr>
<tr class="separator:a1c5b4e0a4cbf262b533f64fd8b88b45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98fbe241a9a99143835d5b3c1726c1e8" id="r_a98fbe241a9a99143835d5b3c1726c1e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/recon__geom_8c.html#a98fbe241a9a99143835d5b3c1726c1e8">setup_recon_GA</a> (<a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *recon, const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *parms, const <a class="el" href="../../d6/d94/maos_2types_8h.html#da/dcf/structpowfs__t">powfs_t</a> *powfs)</td></tr>
<tr class="separator:a98fbe241a9a99143835d5b3c1726c1e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699cb83e672d1ebc6885edce0f0b5d2a" id="r_a699cb83e672d1ebc6885edce0f0b5d2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/recon__geom_8c.html#a699cb83e672d1ebc6885edce0f0b5d2a">setup_recon_GF</a> (<a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *recon, const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *parms)</td></tr>
<tr class="separator:a699cb83e672d1ebc6885edce0f0b5d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac112c22f2d96d1373e967abb6bcb614d" id="r_ac112c22f2d96d1373e967abb6bcb614d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/recon__geom_8c.html#ac112c22f2d96d1373e967abb6bcb614d">setup_recon_GR</a> (<a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *recon, const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *parms)</td></tr>
<tr class="separator:ac112c22f2d96d1373e967abb6bcb614d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1da2a8efe02e505b025aee27f4f02ff" id="r_af1da2a8efe02e505b025aee27f4f02ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/recon__geom_8c.html#af1da2a8efe02e505b025aee27f4f02ff">setup_recon_dither_dm</a> (<a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *recon, const <a class="el" href="../../d6/d94/maos_2types_8h.html#da/dcf/structpowfs__t">powfs_t</a> *powfs, const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *parms)</td></tr>
<tr class="separator:af1da2a8efe02e505b025aee27f4f02ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a376b025ba1fd17827089d97a298e109c" id="r_a376b025ba1fd17827089d97a298e109c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d52/recon__geom_8c.html#a376b025ba1fd17827089d97a298e109c">setup_recon_prep</a> (const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *parms, const <a class="el" href="../../df/def/type_8h.html#d6/da3/structmap__t">map_t</a> *aper, const <a class="el" href="../../d6/d94/maos_2types_8h.html#da/dcf/structpowfs__t">powfs_t</a> *powfs)</td></tr>
<tr class="separator:a376b025ba1fd17827089d97a298e109c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Setup grid and ray tracing operators regarding DM. This is independent of 1) WFS geometry or noise parameters 2) Tomography </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a7106d709bbd10a16e96fd7e53736f841" name="a7106d709bbd10a16e96fd7e53736f841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7106d709bbd10a16e96fd7e53736f841">&#9670;&#160;</a></span>shwfs_gloc_gamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shwfs_gloc_gamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/def/type_8h.html#da/ddc/structloc__t">loc_t</a> **&#160;</td>
          <td class="paramname"><em>pgloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d27/structdmat.html">dmat</a> **&#160;</td>
          <td class="paramname"><em>gamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/def/type_8h.html#d6/da3/structmap__t">map_t</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iwfsr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create loc/amp that can be used to build GP. It has points on edge of subapertures which is different from powfs.loc. The amplitude depends on the distortion as we assume that the distortion can be extracted from dm to wfs interaction matrix calibration. </p>

</div>
</div>
<a id="a1c5b4e0a4cbf262b533f64fd8b88b45a" name="a1c5b4e0a4cbf262b533f64fd8b88b45a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c5b4e0a4cbf262b533f64fd8b88b45a">&#9670;&#160;</a></span>setup_recon_HXW()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_recon_HXW </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/def/type_8h.html#d2/d8c/structmapcell">mapcell</a> *&#160;</td>
          <td class="paramname"><em>atm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setup ray tracing operator from xloc to ploc for guide stars. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recon</td><td></td></tr>
    <tr><td class="paramname">parms</td><td></td></tr>
    <tr><td class="paramname">atm</td><td>If set, atm[].vx,vy will be used for predictive offsetting. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a98fbe241a9a99143835d5b3c1726c1e8" name="a98fbe241a9a99143835d5b3c1726c1e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98fbe241a9a99143835d5b3c1726c1e8">&#9670;&#160;</a></span>setup_recon_GA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_recon_GA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d94/maos_2types_8h.html#da/dcf/structpowfs__t">powfs_t</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setup gradient operator form aloc for wfs by using GP. </p>

</div>
</div>
<a id="a699cb83e672d1ebc6885edce0f0b5d2a" name="a699cb83e672d1ebc6885edce0f0b5d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a699cb83e672d1ebc6885edce0f0b5d2a">&#9670;&#160;</a></span>setup_recon_GF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_recon_GF </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>From focus mode to gradients. This acts on WFS, not WFSR. </p>

</div>
</div>
<a id="ac112c22f2d96d1373e967abb6bcb614d" name="ac112c22f2d96d1373e967abb6bcb614d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac112c22f2d96d1373e967abb6bcb614d">&#9670;&#160;</a></span>setup_recon_GR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_recon_GR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>From radial order modes to gradients. </p>

</div>
</div>
<a id="af1da2a8efe02e505b025aee27f4f02ff" name="af1da2a8efe02e505b025aee27f4f02ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1da2a8efe02e505b025aee27f4f02ff">&#9670;&#160;</a></span>setup_recon_dither_dm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_recon_dither_dm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> *&#160;</td>
          <td class="paramname"><em>recon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d94/maos_2types_8h.html#da/dcf/structpowfs__t">powfs_t</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dither using command path (DM) aberration </p>

</div>
</div>
<a id="a376b025ba1fd17827089d97a298e109c" name="a376b025ba1fd17827089d97a298e109c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a376b025ba1fd17827089d97a298e109c">&#9670;&#160;</a></span>setup_recon_prep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d94/maos_2types_8h.html#d1/d27/structrecon__t">recon_t</a> * setup_recon_prep </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/d38/parms_8h.html#d4/d51/structparms__t">parms_t</a> *&#160;</td>
          <td class="paramname"><em>parms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/def/type_8h.html#d6/da3/structmap__t">map_t</a> *&#160;</td>
          <td class="paramname"><em>aper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/d94/maos_2types_8h.html#da/dcf/structpowfs__t">powfs_t</a> *&#160;</td>
          <td class="paramname"><em>powfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create reconstruction parameters that are related to the geometry only, and will not be updated when estimated WFS measurement noise changes.</p>
<p>This can be used to do NCPA calibration. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->

   </ul>
 </div>
</body>
</html>
