<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<title>MAOS: recon.conf</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../maos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MAOS
   </div>
   <div id="projectbrief">Multithreaded Adaptive Optics Simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d8/d1c/recon.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">recon.conf</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="fragment"><div class="line">#File recon.conf</div>
<div class="line"> </div>
<div class="line">#The parameters for generation reconstruction</div>
<div class="line">recon.alg       = 0 #0: MVR. 1: LSR</div>
<div class="line">recon.glao      = 0 #1: average gradient from wfs of same type (GLAO).</div>
<div class="line">recon.split     = 1 #0: integrated reconstruction. 1: ad hoc Split. 2: mvst (only if recon.alg==0)</div>
<div class="line">recon.mvm       = 0 #1: pre-assemble control matrix by solve identity matrix </div>
<div class="line">recon.modal     = 0 #-2: emulate zonal, -1: zernike modes, 0: zonal, 1: KL modes</div>
<div class="line">recon.psol      = -1 #1: Use pseudo open loop gradients. -1 : auto, on for MVR off for lsr</div>
<div class="line">recon.poke      = 1e-7 #How much WFE (meter) to apply to OPD for computing experimental interaction matrix. In noise free case, smaller one works fine.</div>
<div class="line">recon.psd       = 1 #1: compute PSDs of DM error signal averaged over aperture and field points for loop gain optimization. 0: disable</div>
<div class="line">recon.psddtrat_hi=256 #how many time step to sample for DM PSD computation. (256 is not good for bad seeing)</div>
<div class="line">recon.psddtrat_lo=ref:recon.psddtrat_hi #For low order PSD computation. 0:disable</div>
<div class="line">recon.psdservo_gain=0.5 #Gain used to update servo gains</div>
<div class="line">recon.psdnseg   = 1 #how many overlapping partitions of the time history to compute PSD.</div>
<div class="line">recon.petal     = 0 #1: enable petaling mode control with OIWFS PSFs.</div>
<div class="line">recon.petaldtrat= 50 #how many time steps to average for petaling mode control.</div>
<div class="line">recon.petalstep = 10 # simulation step to enable petal mode control.</div>
<div class="line">recon.petalnpsf = 16 #number of pixels (each dimension) used for petal reconstruction</div>
<div class="line">recon.petaltt   = 1 #whether include t/t modes in the reconstruction. 1: TT OIWFS only. 2: both TTF and TT (not good).</div>
<div class="line">#The following ahst_* options are only used in ad hoc split control </div>
<div class="line">tomo.ahst_wt    = 1 #weighting method to remove ngs modes from lgs reconstruction output DM error signal. Negligible performance difference with NGS control, but option 1 behaves badly without NGS.</div>
<div class="line">                    #1: use NGS gradient reconstruction weighting (bad if there is no NGS control output)</div>
<div class="line">                    #2: use aperture evaluation weighting, </div>
<div class="line">                    #3: identity weighting. (behaves well without NGS control output)</div>
<div class="line">                    #4: Remove 2nd order terms from upper DMs and add to ground DM. (new and default as of 12/6/2024, handles more than 2 DM case well without fighting; as good as wt=3)</div>
<div class="line">tomo.ahst_idealngs = 0 #apply ideal NGS mode correction. for skycoverage pre-simulation</div>
<div class="line">tomo.ahst_focus = 1 #Only useful in LGS AO mode, in split tomography, when focus tracking (sim.mffocus)is turned on.</div>
<div class="line">                    #0: the first plate scale mode creates focus error on science, but no focus error in LGS.</div>
<div class="line">                    #1: the first plate scale mode results in no focus in science, but focus error in LGS. sim.mffocus takes care of it.</div>
<div class="line">                    #2: Like 1, but feed this mode to LGS focus measurement. (Deprecated).</div>
<div class="line">#The parameters for minimum variance tomography reconstruction, which is</div>
<div class="line">#composed of a turbulence tomography step and a DM fitting step.</div>
<div class="line"> </div>
<div class="line">#Turbulence tomography reconstruction information.</div>
<div class="line"> </div>
<div class="line">tomo.assemble   = 0 #1: Assemble tomography matrix.  0: don&#39;t assemble. 0 is fast for CG. automatically set to 1 in CBS mode</div>
<div class="line">tomo.predict    = 0 #prediction through modified ray tracing direction in tomo (testing)</div>
<div class="line">tomo.tikcr      = 1e-8 #tikhonov regularization. Necessary if tomo.alg=0.</div>
<div class="line">tomo.svdthres   = 1e-8 #threshold of SVD inversion.</div>
<div class="line">tomo.piston_cr  = 0 #single point piston constraint in tomography. degrads fdpcg. does not help cg or cbs.</div>
<div class="line"> </div>
<div class="line">tomo.alg        = 1 #Tomography algorithm. 0: cholesky backsubstitution (CBS) on full matrix</div>
<div class="line">                    #1: Conjugate Gradient (CG). 2: SVD Inversion.</div>
<div class="line">tomo.bgs        = 0 #block Gauss Seidel method.</div>
<div class="line">tomo.precond    = 1 #Tomography CG preconditioning. 0: no precondition. 1: Fourier Domain Preconditioner.</div>
<div class="line">tomo.maxit      = 0 #max iterations in CG. 0 is default: 40 for CG, 4 for FDPCG (tomo.precond=1) x10 in non warm restart mode (3 as of 2016-06-20)</div>
<div class="line">tomo.minwt      = 0.01 #minimum layer weight allowed. if less than this will force to this. Too small value has numerical precision issue.</div>
<div class="line">tomo.square     = 0 #1: using square grid in tomography (xloc and ploc)</div>
<div class="line"> </div>
<div class="line">tomo.cone     = 1 #1: using cone coordinate for tomography grid. keep at 1.</div>
<div class="line">tomo.cxxalg   = 0 #method to compute Cxx^-1. 0: bihormonic approx. 1: inverse psd. 2: fractal</div>
<div class="line">tomo.cxxscale = 1 #scale the Cxx^-1 term (debugging).</div>
<div class="line">tomo.guard    = 1 #rings of padding in generating tomography pupil grid, not too small, not too large.</div>
<div class="line">tomo.pos      = 2 #over sampling ratio of ploc grid over actuator grid</div>
<div class="line">tomo.nxbase   = 0 #Each layer xloc grid size is tomo.os*tomo.nxbase if not zero. same for ploc.</div>
<div class="line"> </div>
<div class="line">tomo.iac      = 0 #inter-actuator-coupling in cubic influence function (testing)</div>
<div class="line">tomo.ninit    = 5 #Initial size of the screen in fractal method. &gt;=2</div>
<div class="line">tomo.splitlrt = 1 #&gt;0: use low rank terms in left hand side (1: focus removal, 2: t/t/focus removal) in split tomography. to 0 on 2013/1/15. to 2 on 2025/04/23</div>
<div class="line"> </div>
<div class="line">#DM Fitting</div>
<div class="line"> </div>
<div class="line">fit.guard     = 1 #rings of padding in generating DM fitting pupil grid, not too small, not too large.</div>
<div class="line">fit.tikcr     = 1e-7 #tikhonov regularization. 1.e-9 is not enough.</div>
<div class="line">fit.svdthres  = 2e-4 #threshold of SVD inversion</div>
<div class="line">fit.actslave  = 1 #1: enable lsr.actthres, 2: also enable fit.actthres2.</div>
<div class="line">fit.actthres  = 0.1 #When actuator coupling drops below this, start slaving its value. 0.05 is not very stable.</div>
<div class="line">fit.actthres2 = 0.7 #When actuator coupling drops below this, start reducing jump around it.</div>
<div class="line">fit.actextrap = 1 #Extrapolate weakly coupled actuators from active ones.</div>
<div class="line">fit.lrt_piston= 1 #piston constraint</div>
<div class="line">fit.lrt_tt    = 1 #Limiting tip/tilt on upper DMs.</div>
<div class="line">fit.assemble  = 1 #1: assemble fit matrix. fast for fit.</div>
<div class="line">fit.alg       = -1 #Fitting algorithm. see tomo.alg. CBS works the best, but slow in GPU. -1 will change to 0 (zonal) or 2 (modal) in MVM and 1 otherwise.</div>
<div class="line">fit.bgs       = 0 #block Gauss Seidel method.</div>
<div class="line">fit.precond   = 0 #CG preconditioning. see tomo.precond. None is implemented. keep at 0.</div>
<div class="line">fit.maxit     = 0 #max iterations in CG. 0 is default: 10. x10 in non warm restart mode</div>
<div class="line">fit.square    = 0 #use square grid on DM grid and ploc</div>
<div class="line">fit.hs        = [inf] #the height of the science object to optimize DM fitting with. normally infinity</div>
<div class="line">fit.pos       = ref:tomo.pos #over sampling ratio of floc grid over actuator grid. </div>
<div class="line">fit.cachedm   = 1  #cache DM command onto a grid matched with floc.</div>
<div class="line">fit.cachex    = 0  #cache x on xloc to non-cone coordinate. no speed up</div>
<div class="line">#Parameters for least square reconstructor follows tomography parameter.</div>
<div class="line">lsr.tikcr     = 1e-2 #auto disabled for lsr.actslave=2 which regulates piston for each quadrant</div>
<div class="line">lsr.svdthres  = 1e-5</div>
<div class="line">lsr.actslave  = 1 #1: enable lsr.actthres, 2: also enable lsr.actthres2. (default: 1)</div>
<div class="line">lsr.actthres  = 0.7 #When actuator coupling coefficient drops below this, start slaving its value. (default: 0.65)</div>
<div class="line">lsr.actthres2 = 0.8 #When actuator coupling drops below this, start reducing jump around it.</div>
<div class="line">lsr.actextrap = -1 #extrapolate weakly coupled actuators from active ones. -1: auto, on for zonal, off for modal control</div>
<div class="line">lsr.splitlrt  = 0 #low rank terms also in LHS. keep at 0.</div>
<div class="line">lsr.fnreg     = #File name for regularization. has to be sparse cell array of ndm*ndm. </div>
<div class="line">lsr.bgs       = 0 #block Gauss Seidel method.</div>
<div class="line">lsr.alg       = 2 #LSR algorithm. see tomo.alg. SVD works the best.</div>
<div class="line">lsr.maxit     = 0 #max iterations in CG. 0 is default: 30. x10 in non warm restart mode.</div>
<div class="line"> </div>
<div class="line">#The misregistration model to be used in WFE reconstruction</div>
<div class="line">recon.distortion_tel2wfs=[]</div>
<div class="line">recon.distortion_dm2wfs=[]</div>
<div class="line">recon.distortion_dm2sci=[]</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">#for truth WFS configuration</div>
<div class="line">recon.twfs_rmin=3    #minimum zernike order (inclusive)</div>
<div class="line">recon.twfs_rmax=20   #maximum zernike order (inclusive)</div>
<div class="line">recon.twfs_radonly=0 #1: radial only, 0: all modes</div>
<div class="line">#supersedes the following configuration</div>
<div class="line">#dbg.twfsflag=0 #use TWFS to control 0: all modes&gt;=spherical, 1: only radial modes&gt;=spherical, 2: all modes&gt;=focus, 3: only radial modes&gt;= focus</div>
<div class="line">#dbg.twfsrmax=9 #TWFS maximum zernike radial order.</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

   </ul>
 </div>
</body>
</html>
