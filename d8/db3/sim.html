<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<title>MAOS: sim.conf</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../maos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MAOS
   </div>
   <div id="projectbrief">Multithreaded Adaptive Optics Simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d8/db3/sim.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">sim.conf</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="fragment"><div class="line">#File sim.conf</div>
<div class="line">#Contains common parameters to all setups.</div>
<div class="line">#SI units are used unless otherwise noted.</div>
<div class="line">#Entries marked as (engineering) are not used for normal simulations</div>
<div class="line">#path=dir #add dir to path. Relative to the directory of enclosing conf file unless absolute path is used.</div>
<div class="line">#Telescope Aperture Configuration.</div>
<div class="line">aper.d        = [30 3.6] #outer (d) and inner diameter (din) in meter. may contain one number for [d] or two numbers for [d din]. din=0 when omitted. [0] to use size from aper.fnamp</div>
<div class="line">aper.fnamp    = &quot;TMT_23cm6.bin&quot; #The telescope aperture amplitude map file. It contains a nx*ny 2d array of values between 0 and 1 with the following keywords:</div>
<div class="line">                  # dx, dy: grid spacing in m.</div>
<div class="line">                  # ox oy: grid origin in m. FFT style origin (-nx/2*dx) is used if omitted.</div>
<div class="line">                  # ht. height in m. always at 0.</div>
<div class="line"> </div>
<div class="line">aper.rotdeg   = 0     #Telescope pupil rotation CCW in degrees.</div>
<div class="line">aper.pupmask  = &quot;&quot;    #Instrument pupil Lyot mask file.</div>
<div class="line">aper.misreg   = [0,0] #Calibrated telescope pupil misregistration along x and y in meter. </div>
<div class="line">aper.misregu  = [0,0] #Un-calibrated telescope pupil misregistration along x and y in meter. </div>
<div class="line">#Simulation parameters.</div>
<div class="line">sim.seeds     = [1]   #random seeds. a list. 0 means random seed</div>
<div class="line">sim.start     = 0     #first time step. usually 0.</div>
<div class="line">sim.end       = 500   #last time step (exclusive)</div>
<div class="line">sim.closeloop = 1     #1: closed loop (CL) simulation. 0: open loop correction without feedback control.</div>
<div class="line">sim.dt        = 1/600 #Main loop sampling time in seconds.</div>
<div class="line">sim.dtref     = 1/600 #The integration time in seconds for which the powfs.siglev is computed. Do not change this value. The actual integration time is governed by sim.dt and powfs.dtrat.</div>
<div class="line">sim.zadeg     = 30    #zenith angle in degrees. Switched to 30 degree on 2025-01-27.</div>
<div class="line">sim.htel      = 4000  #height of telescope in meters from mean sea level. It is used to adjust powfs.hs for LGS.</div>
<div class="line">sim.cachedm   = 4     #Caching DM commands to fine sampled grids to speed up ray tracing.  #=1: sampling is dm.dx/4. &gt;3: sampling is dm.dx/sim.cachedm. 0 to disable.</div>
<div class="line">sim.fov       = 0     #The entire FoV diameter in arcsec. Only used for plotting.</div>
<div class="line"> </div>
<div class="line">#RTC servo coefficients. The total (high order) loop latency is sim.dt*(powfs.dtrat+1+sim.alhi).</div>
<div class="line">#A is command. e is error signal. at time step n, the command is updated by</div>
<div class="line">#A(n)=A(n-1)*ap(0)+A(n-2)*ap(1)+...+e(n-2)*ep.</div>
<div class="line">sim.aphi      = 1     #high order loop integrator leakage parameter ap.</div>
<div class="line">sim.ephi      = 0.5   #high order loop error gain ep. &lt;=0: auto compute. </div>
<div class="line">sim.alhi      = 0     #Additional latency (in sim.dt) of the high order loop. Can be fractional but must be &gt;=0.</div>
<div class="line">sim.f0dm      = 0     #Natural frequency of the DMs in Hz. 0 is for spontaneous response.</div>
<div class="line">sim.zetadm    = 1     #Damping of the DMs.</div>
<div class="line">sim.aplo      = ref:sim.aphi #ap for low order control. See sim.aphi</div>
<div class="line">sim.eplo      = ref:sim.ephi #error gain of low order modes. See sim.ephi</div>
<div class="line">sim.allo      = ref:sim.alhi #Additional latency (sim.dt) of the lo order loop. See sim.alhi.</div>
<div class="line">sim.fcttm     = 20    #Cross over frequency in Hz of T/T split between DM and TTM (20Hz)*/</div>
<div class="line"> </div>
<div class="line">#Focus tracking gains.</div>
<div class="line">sim.fcfocus   = inf   #cross-over frequency in Hz of the focus LPF of the NGS focus and HPF of LGS focus. LPF gain is lpfocus=2*pi*fc/fs where fs is sampling frequency.</div>
<div class="line">                      #-1 means 1/10 of NGS frame rate. inf means remove LGS focus completely.</div>
<div class="line">sim.mffocus   = -1    #method for focus tracking.</div>
<div class="line">                        #0: disable focus update.</div>
<div class="line">                        #1: Focus tracking using closed loop gradients, for each LGS independently. (preferred)</div>
<div class="line">                        #2: Focus tracking using closed loop gradients, for common LGS focus only.</div>
<div class="line">                        #-1: auto. 1 for LGS, 0 for NGS.</div>
<div class="line">#Focus offloading to telescope</div>
<div class="line">sim.focus2tel = 0     #Offload focus to telescope. (engineering)</div>
<div class="line">sim.epfocus2tel=0.01  #Integrator gain for telescope focus control</div>
<div class="line">#Truth WFS reference vector update parameters</div>
<div class="line">sim.aptwfs    = 1     #Truth WFS reference vector update leakage ap.</div>
<div class="line">sim.eptwfs    = 0.05  #Truth WFS reference vector update integrator gain.</div>
<div class="line">sim.eptsph    = 0.5   #Truth WFS reference vector update integrator gain for spherical mode.</div>
<div class="line">#Other</div>
<div class="line">sim.skysim    = 0     #enable pre-simulation for sky coverage (applies ideal correction for NGS WFS controlled modes and saves NGS WFS complex PSFs).</div>
<div class="line">sim.wspsd     = #PSD_TMT_ws50p13mas_vib15mas_rad2.bin      #Telescope wind shake PSD input. Nx2. First column is frequency in Hz, Second column is PSD in rad^2/Hz.</div>
<div class="line">sim.wsseq     = 1     #Wind-shake sequence random number generator seed. different wsseq gives different realization.</div>
<div class="line">sim.dmadd     = &quot;&quot;    #file containing dm vector to simulate turbulence (added to integrator output).</div>
<div class="line">                      #Contains ndm cells. In each cell, one column is for each time step. Wraps over in the end. Can be empty.</div>
<div class="line"> </div>
<div class="line">#if mvmport is nonzero connect to the mvm server at mvmhost:mvmport.</div>
<div class="line">sim.mvmhost   = &quot;localhost&quot; #Where does the MVM server run (engineering)</div>
<div class="line">sim.mvmport   = 0     #which port does the MVM server run. 0: disable mvm server/client (engineering)</div>
<div class="line">sim.mvmsize   = 0     #number of gradients to send each time. 0 is all. (engineering)</div>
<div class="line">sim.mvmngpu   = 0     #&gt;0: limit maximum number of gpus to use. (engineering)</div>
<div class="line"> </div>
<div class="line">#For special purpose</div>
<div class="line">sim.noatm     = 0     #Disable atmosphere generation (e.g., to evaluate telescope errors).</div>
<div class="line">sim.evlol     = 0     #evaluate open loop performance only. Skip wfs/tomography/reconstruction.</div>
<div class="line">sim.psfr      = 0     #Save PSF reconstruction telemetry.</div>
<div class="line">sim.ecnn      = 0     #Estimate WF covariance due to WFS noise cov Cnn.</div>
<div class="line">sim.wfsalias  = 0     #Study the wfs aliasing effect by project turbulence onto the orthogonal of the DM vector space.</div>
<div class="line">sim.idealtomo = 0     #1: down-sampled turbulence is used as tomography output (Bypasses WFS and tomography). Was called sim.idealfit</div>
<div class="line">sim.idealwfs  = 0     #Implements ideal WFS by only using turbulence in DM correctable space. conflicts with sim.wfsalias</div>
<div class="line">sim.idealevl  = 0     #Evaluate the performance only in DM correctable space. Ignores DM fitting/projection error.</div>
<div class="line">sim.dtrat_skip= 0     #drop frame every this many time steps (sim.dt). 0 no drop. This is to simulate RTC dropping frames. (engineering)</div>
<div class="line">sim.fuseint   = 1     #use fused integrator. for high and low order loop. Keep at 1. (engineering)</div>
<div class="line">sim.pause     = 0     #Pause after every step (engineering)</div>
<div class="line">sim.bzero     = [0.36 4.1e9; 0.44 1.43e10; 0.589 8.78e9; 0.64 1.07e10; 0.79 7.32e9; 1.25 3.22e9; 1.65 2.82e9; 2.2 1.51e9; ] #photons flux per second per m^2 for a zero magnitude star. pairs of wavelength in micron and flux. U-I are based on Bessel (1979)</div>
<div class="line"> </div>
<div class="line">#GPU enablement for various functions.</div>
<div class="line">gpu.wfs       = 1     #Use GPU for wavefront sensor modeling</div>
<div class="line">gpu.evl       = 1     #Use GPU for Performance evaluation</div>
<div class="line">gpu.tomo      = 1     #Use GPU for tomography</div>
<div class="line">gpu.fit       = 1     #Use GPU for DM fitting</div>
<div class="line">gpu.lsr       = 1     #Use GPU for least square reconstruction</div>
<div class="line">gpu.psf       = 1     #Use GPU to accumulate PSF.</div>
<div class="line">gpu.moao      = 1     #Use GPU for MOAO</div>
<div class="line"> </div>
<div class="line">#Atmospheric turbulence common parameters (atm.r0z etc. are defined in atm_*.conf files)</div>
<div class="line">atm.method    = 0     #0: Von Karman (default). 1: Fractal method. 2: Biharmonics (psd is f^-4 power). (engineering)</div>
<div class="line">atm.ninit     = 17    #Initial size of the screen in fractal method. &gt;=2 (engineering)</div>
<div class="line">atm.size      = [64 64] #size of atmosphere in meter. 0: automatic to cover the meta-pupil.</div>
<div class="line">atm.dx        = 1/64  #Sampling of the atmosphere in meter. Usually match evl.dx. Change powfs.dx to match if necessary.</div>
<div class="line">atm.wddeg     = [0]   #Fixed wind direction (in degree) for all (1 number) or each (same length as atm.ht) turbulence layer. not used if atm.wdrand is set.</div>
<div class="line">atm.wdrand    = 1     #&gt;0: as an additional seed to randomize wind direction (see sim.seeds)</div>
<div class="line">atm.frozenflow= 1     #using frozen flow screen (when sim.closeloop=0. sim.closeloop=1 is always frozen-flow)</div>
<div class="line">atm.share     = 1     #1: share atmoshere between different maos runs with the same seed using mmap&#39;ed file to save memory. (engineering)</div>
<div class="line">atm.r0evolve  = 0     #0: disable. 1: Scale turbulence screen spatially by r0logpsds, 2) Scale raytracing result using r0logpsdt, 3) both. Useful for long running simulations to vary r0.</div>
<div class="line">atm.r0logpsdt = [-1.43 3.353e-4 0 0.3107] #[alpha beta fmin fmax]:temporal PSD of log(r0) /Hz: beta*f^alpha. Or a file of nx2</div>
<div class="line">atm.r0logpsds = [-2.43 5.195e-5 0 1/30] #[alpha beta fmin fmax]:spatial PSD of log(r0) /Hz: beta*f^alpha. Or a file of nx2</div>
<div class="line">atm.dtrat     = 0     #Only used if atm are loaded with frames that need to playback in time.</div>
<div class="line">atm.interp    = 3     #Interpolation method when atm.dtrat&gt;0. 0: stepwise (no interpolation), 1: linear, 2: sin^2, 3: p-chip.</div>
<div class="line">#Tomography turbulence parameters</div>
<div class="line">atmr.dx       = 0     #Fundamental reconstruction grid sampling in meter. 0: matching the subaperture spacing of high order WFS.</div>
<div class="line">atmr.os       = [2]   #Reconstruction screen oversampling over atmr.dx. 1 number per atmr layer (see atmr.ht) or a single number for all layers.</div>
<div class="line">atmr.r0z      = ref:atm.r0z #atm r0 at zenith in meter. -1: matches atm.r0z</div>
<div class="line">atmr.L0       = ref:atm.L0  #atm outer scale in meter.  -1: matches atm.l0</div>
<div class="line">atmr.ht       = ref:atm.ht  #reconstructed screen height in meter. Empty meaning follow atm.ht (MCAO)</div>
<div class="line">atmr.wt       = ref:atm.wt  #reconstructed screen weight. Empty meaning follow atm.wt (MCAO)</div>
<div class="line"> </div>
<div class="line">#CN2 Estimation using slodar.</div>
<div class="line">cn2.pair      = []    #pairs of wfs to estimate cn2. empty to disable cn2 estimation.</div>
<div class="line">cn2.step      = 100   #cn2 estimation output results every cn2.step time steps.</div>
<div class="line">cn2.reset     = 0     #reset the accumulated cn2 after every cn2.reset set of results.</div>
<div class="line">cn2.hmax      = 18000 #maximum layer height in meter to esimate at zenith.</div>
<div class="line">cn2.saat      = 0.95  #subaperture normalized area threashold to use in cn2 estimation.</div>
<div class="line">cn2.keepht    = 1     #1: Interpolate slodar results onto atmr.ht. 2: do slodar directly on these layers. 1 works better.</div>
<div class="line">cn2.tomo      = 0     #1: update tomography parameters with slodar output.</div>
<div class="line">cn2.verbose   = 1     #1: output estimated r0, cn2 during simulation.</div>
<div class="line">cn2.nhtomo    = 6     #number of layers to feed into reconstructor. only effective if keepht==0</div>
<div class="line">cn2.psol      = 1     #1: use pseudo open loop gradients. 0: use residual turbulence. 1 works better.</div>
<div class="line">cn2.moveht    = 0     #move the ht used for reconstructor to near strongest layers. only effective if keepht=0.</div>
<div class="line"> </div>
<div class="line">#set MOAO DMs parameters. See dm.* for definition</div>
<div class="line">moao.dx       = [0.5] #spacing of actuator in meter. see dm.dx.</div>
<div class="line">moao.iac      = [0.223] #inter-actuator coupling. see dm.iac</div>
<div class="line">moao.gdm      = [0.5] #low pass filter gain on MOAO DM command.</div>
<div class="line">moao.stroke   = [inf] #actuator stroke</div>
<div class="line">moao.actslave = [0]   #inactive actuator slaving flag.</div>
<div class="line">moao.lrt_ptt  = [0]   #low rank terms (piston/tip/tilt removal)</div>
<div class="line">moao.guard    = [1]   #rings of guard actuators</div>
<div class="line">moao.actstuck = [&quot;&quot;]  #list of stuck actuators. See dm.actstuck</div>
<div class="line">moao.actfloat = [&quot;&quot;]  #list of floating actuators. see dm.actfloat</div>
<div class="line">moao.ar       = [1]   #aspect ratio. see dm.ar.</div>
<div class="line">#Science evaluation field parameters</div>
<div class="line">evl.dx      = ref:atm.dx  #sampling of the aperture in meter in simulation. -1: follow atm.dx</div>
<div class="line">evl.psfr    = [1] #output psf reconstruction telemetry for this direction.</div>
<div class="line">evl.hs      = [inf] #the height of the science object. normally infinity.</div>
<div class="line">evl.rmax    = 1   #max radial order for zernke fitting in performance evaluation. 1: includes piston/tip/tilt. 2: p/t/t/focus/astigmatism</div>
<div class="line">evl.tomo    = 0   #Use tomography output directly as wavefront correction. (engineering)</div>
<div class="line">evl.split   = 1   #1: Always evaluate tip/tilt/plate scale errors. Auto set if in split tomography.</div>
<div class="line">evl.moao    = -1  #index into MOAO config in recon.conf</div>
<div class="line">evl.psfhist = 0   #output history of the complex psf (a lot of storage).</div>
<div class="line">evl.psfmean = 0   #output time averaged psf after incrementally averaging this many time steps.</div>
<div class="line">                  #1: only save in the end. n: save average every n steps (no reset after saving)</div>
<div class="line">evl.psfol   = 0   #compute open loop psf in additional to closed loop PSF.</div>
<div class="line">                  #0: disable 1: on axis direction only, 2: all directions and average them.</div>
<div class="line">evl.psf     = [1] #Include this direction if psf is computed. 1 or nevl elements. 1: regular, 2: ngs mode removed in ahst. 3: both.</div>
<div class="line">evl.pttr    = [0] #remove p/t/t in wavefront OPD before computing PSF or covariance.</div>
<div class="line">evl.cov     = 0   #save covariance of opd for directions for steps like evl.psfmean (no reset after saving). For PSF reconstruction.</div>
<div class="line">evl.opdmean = 0   #save science opd time average every this many time steps if &gt;0.</div>
<div class="line">evl.wvl     = [1.25e-6 1.65e-6 2.2e-6] #wavelength to evaluat PSF or strehl</div>
<div class="line">evl.psfisim = 20  #time step to start psfmean/psfhist</div>
<div class="line">evl.psfgridsize=[]#1-d FFT grid size for psf computation for each wavelength. 0,1,or evl.nwvl number of elements.</div>
<div class="line">                  #empty or 0:automatic.The computed PSF has sampling of evl.wvl/(evl.psfgridsize*evl.dx).</div>
<div class="line">evl.psfsize = []  #Limit PSF side length in pixels for output. Larger PSF is truncated to this size.</div>
<div class="line">                  #Set to 1 to compute strehl only. 1 or nwvl number of elements(for each wvl)</div>
<div class="line"> </div>
<div class="line">#some common DM parameters that are usually the same for each DM. Can take either 1 or ndm values.</div>
<div class="line">dm.dx     = [0.5]  #spacing of DM actuators in meter at the primary mirror. preferred way to set system order as of 2014-04-03. Only way since 2016.</div>
<div class="line">dm.ar     = [1]    #DM actuator spacing aspect ratio. dy/dx spacing</div>
<div class="line">dm.guard  = [1]    #extra DM actuator rings in actuator grid. default: 1</div>
<div class="line">dm.stroke = [inf]  #surface stroke in micron. opd is [-stroke stroke]</div>
<div class="line">dm.iastroke=[inf]  #surface inter-actuator stroke in micron (or voltage if dm.strokescale is supplied)</div>
<div class="line">dm.strokescale=[]  #describes polynomials that convert opd to voltage (first cell), and voltage to opd</div>
<div class="line">                   # (second cell). The two operations has to be strict inverse of each other</div>
<div class="line">dm.iac    = [0.223] #inter-actuator-coupling coefficient for cubic influence function. 0: disable. 4/29/2019: updated from 0.3.</div>
<div class="line">dm.hist   = [0]    #output histogram of DM actuator commands.</div>
<div class="line">dm.histbin= [1e-7] #The bin size in meters for DM histogram computation.</div>
<div class="line">dm.histn  = [201]  #Total number of bins. odd number, centered around zero.</div>
<div class="line">dm.vmisreg= [0]    #DM vertical misregistration. not implemented yet.</div>
<div class="line">dm.hyst   = [0]    #DM model hysteresis amount (ratio)</div>
<div class="line">dm.hyst_alpha=[2]  #The DM model hysteresis alpha parameter</div>
<div class="line">dm.hyst_stroke=[10e-6] #The surface stroke that the hysteresis is measured at</div>
<div class="line">dm.actfloat = [&quot;&quot;] #file containing floating actuators. nx2 coordinate</div>
<div class="line">dm.actstuck = [&quot;&quot;] #file containing stuck actuators. nx2 coordinate. or nx3 with third column the stuck position (in opd).</div>
<div class="line">dm.dratio   = [1]  #telescope diameter to DM diameter ratio (beam angle magnification factor). Used to scale DM OPD correction.</div>
<div class="line">dm.nmod     = [0.96] #Maxium number of modes in modal controller for each DM. 0: all available modes. &lt;1: as a fraction of dm.order^2*pi/4. &gt;1: actual number.</div>
<div class="line"> </div>
<div class="line">#Distortion parameters</div>
<div class="line">#Use powfs.misregx/y instead for WFS misregistration (shift)</div>
<div class="line">#Use aper.misreg instead for telescope pupil miregistration (shift)</div>
<div class="line">distortion.tel2wfs=[] #From telescope pupil (atmosphere) to WFS.  It handles SA thresholding correctly.</div>
<div class="line">distortion.dm2wfs=[] #From DM to WFS. &quot;0.5+x; 0.2+y&quot; #for pure shift of 0.5, 0.2 along x and y.</div>
<div class="line">distortion.dm2sci=[] #From DM to science.</div>
<div class="line"> </div>
<div class="line">#the ncpa.surf can be used to provide both common and non-common path aberrations</div>
<div class="line">ncpa.calib= 1    #calibrate NCPA. Only useful if surf is not empty.  #0: no. 1: use all DMs. 2: use only ground dm</div>
<div class="line">ncpa.ttr  = 0    #Remove average t/t from NCPA for WFS. Equivalent as performing WFS registration alignment.</div>
<div class="line">ncpa.thetax= []  #x coordinate for NCPA calibration direction (arcsec). empty means follow evl.thetax.</div>
<div class="line">ncpa.thetay= []  #y coordinate for NCPA calibration direction(arcsec). empty means follow evl.thetay.</div>
<div class="line">ncpa.wt    = []  #Weight for each NCPA calibration direction. (see evl.wt)</div>
<div class="line">ncpa.hs    = []  #Height of star for each NCPA calibration direction. (see powfs.hs)</div>
<div class="line">ncpa.preload=0   #1: preload integrator with DM sys flat, 0: add DM sys flat after the integrator. (engineering)</div>
<div class="line">ncpa.rmsci=0     #1: do not include uncorrelatable error in science path. (engineering)</div>
<div class="line"> </div>
<div class="line">ncpa.surf  = []  #Simulating surfaces like the telescope or NCPA. Can be a file or string array to generate on the fly.</div>
<div class="line">                 #Each string array contains the following keys to generate screens</div>
<div class="line">                 #for random screen: &quot;r0=0.2;L0=30;slope=-11/3;seed=1;&quot;</div>
<div class="line">                 #for zernide mode (e.g. 5): &quot;rms=100;mode=5&quot;</div>
<div class="line">                 #for petal modes (e.g. 6 petals): &quot;petal=6; rms=100;&quot;</div>
<div class="line">                 #The file header or the string also should contain the following</div>
<div class="line">                 #dx: the sampling along x and y direction (default is 1/64)</div>
<div class="line">                 #ox,oy: the origin along x and y direction (default is -n/2*dx)</div>
<div class="line">                 #h: height of the surface from pupil (default is 0).</div>
<div class="line">                 #vx,vy: frozen flow speed in m/s only for random screen (default is 0).</div>
<div class="line">                 #SURFEVL=[]: vector of the same length of evl.thetax with 1 or 0 to indicate whether the science evaluation direction is covered or not by this map. If keyword is not present, assume all are covered.</div>
<div class="line">                 #SURFWFS=[]: vector of the same length of wfs.thetax with 1 or 0 to indicate whether the WFS is covered or not by this map. If keyword is not present, assume all are covered.</div>
<div class="line">                 #Important: The OPD should cover more area (1/2 meter each side) than meta pupil for interpolation to avoid edge roll off.</div>
<div class="line"> </div>
<div class="line">ncpa.tsurf = []  #Simulating surfaces on M3 that is tilted in converging beam (do not use unless instructed to do so)</div>
<div class="line">                 #Each file contains an array of surface map (NOT OPD) with the following key in header.</div>
<div class="line">                 #keys:(all units are in meters.)</div>
<div class="line">                 #dx,dy: the sampling along x and y direction,</div>
<div class="line">                 #ox,oy: the origin along x and y direction,</div>
<div class="line">                 #txdeg: the x tilt angle in degree wrt beam (90 is prep),</div>
<div class="line">                 #tydeg: the y tilt angle in degree wrt beam (90 is prep),</div>
<div class="line">                 #ftel: The telescope effective focal length,</div>
<div class="line">                 #fexit: the distance between the exit pupil and the focus,</div>
<div class="line">                 #fsurf: the distance between the M3 and the focus.</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->

   </ul>
 </div>
</body>
</html>
